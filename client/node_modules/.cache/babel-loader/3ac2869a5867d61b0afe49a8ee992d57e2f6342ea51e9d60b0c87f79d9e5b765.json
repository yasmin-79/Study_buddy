{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const navigate=useNavigate();const token=localStorage.getItem(\"token\");const[studyStats,setStudyStats]=useState([]);// Fetch files and calculate subject-wise progress\nconst fetchProgress=async()=>{try{const res=await axios.get(\"http://localhost:5000/files\",{headers:{Authorization:\"Bearer \".concat(token)}});// Group files by subject\nconst grouped=res.data.reduce((acc,f)=>{acc[f.subject]=acc[f.subject]?acc[f.subject]+1:1;return acc;},{});// Calculate progress (target 5 files per subject)\nconst stats=Object.keys(grouped).map(subject=>({subject,progress:Math.min(grouped[subject]/5*100,100)}));setStudyStats(stats);}catch(err){console.error(\"Fetch progress error:\",err);}};useEffect(()=>{fetchProgress();// Listen for uploads to update progress\nwindow.addEventListener(\"fileUploaded\",fetchProgress);return()=>window.removeEventListener(\"fileUploaded\",fetchProgress);},[]);const cards=[{title:\"Upload Notes\",desc:\"Upload and manage your study materials\",icon:\"‚¨ÜÔ∏è\",path:\"/dashboard/upload\"},{title:\"View Files\",desc:\"Access uploaded PDFs and files\",icon:\"üìÅ\",path:\"/dashboard/files\"},{title:\"Subjects\",desc:\"Organize your subjects and topics\",icon:\"üìò\",path:\"/dashboard/subjects\"}];return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-semibold text-slate-800\",children:[\"Welcome to \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"StudyBuddy\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-2xl border border-slate-200 p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-slate-700 mb-4\",children:\"Study Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:studyStats.length>0?studyStats.map(stat=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 font-medium\",children:stat.subject}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 text-sm\",children:[Math.round(stat.progress),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-slate-200 rounded-full h-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 h-4 rounded-full transition-all duration-500\",style:{width:\"\".concat(stat.progress,\"%\")}})})]},stat.subject)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No progress yet. Upload some files!\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\",children:cards.map(item=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>navigate(item.path),className:\"bg-white shadow-md hover:shadow-xl transition rounded-2xl border border-slate-200 cursor-pointer p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl mb-3\",children:item.icon}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-slate-700\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mt-2\",children:item.desc})]},item.title))})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","token","localStorage","getItem","studyStats","setStudyStats","fetchProgress","res","get","headers","Authorization","concat","grouped","data","reduce","acc","f","subject","stats","Object","keys","map","progress","Math","min","err","console","error","window","addEventListener","removeEventListener","cards","title","desc","icon","path","className","children","length","stat","round","style","width","item","onClick"],"sources":["C:/Users/yasmi/Downloads/studybuddy/client/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction Dashboard() {\n  const navigate = useNavigate();\n  const token = localStorage.getItem(\"token\");\n\n  const [studyStats, setStudyStats] = useState([]);\n\n  // Fetch files and calculate subject-wise progress\n  const fetchProgress = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:5000/files\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      // Group files by subject\n      const grouped = res.data.reduce((acc, f) => {\n        acc[f.subject] = acc[f.subject] ? acc[f.subject] + 1 : 1;\n        return acc;\n      }, {});\n\n      // Calculate progress (target 5 files per subject)\n      const stats = Object.keys(grouped).map((subject) => ({\n        subject,\n        progress: Math.min((grouped[subject] / 5) * 100, 100),\n      }));\n\n      setStudyStats(stats);\n    } catch (err) {\n      console.error(\"Fetch progress error:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchProgress();\n\n    // Listen for uploads to update progress\n    window.addEventListener(\"fileUploaded\", fetchProgress);\n    return () => window.removeEventListener(\"fileUploaded\", fetchProgress);\n  }, []);\n\n  const cards = [\n    { title: \"Upload Notes\", desc: \"Upload and manage your study materials\", icon: \"‚¨ÜÔ∏è\", path: \"/dashboard/upload\" },\n    { title: \"View Files\", desc: \"Access uploaded PDFs and files\", icon: \"üìÅ\", path: \"/dashboard/files\" },\n    { title: \"Subjects\", desc: \"Organize your subjects and topics\", icon: \"üìò\", path: \"/dashboard/subjects\" },\n  ];\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-3xl font-semibold text-slate-800\">\n          Welcome to <span className=\"text-blue-600\">StudyBuddy</span>\n        </h1>\n      </div>\n\n      {/* Study Progress */}\n      <div className=\"bg-white shadow-lg rounded-2xl border border-slate-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-slate-700 mb-4\">Study Progress</h2>\n        <div className=\"space-y-4\">\n          {studyStats.length > 0 ? (\n            studyStats.map((stat) => (\n              <div key={stat.subject}>\n                <div className=\"flex justify-between mb-1\">\n                  <span className=\"text-gray-700 font-medium\">{stat.subject}</span>\n                  <span className=\"text-gray-500 text-sm\">{Math.round(stat.progress)}%</span>\n                </div>\n                <div className=\"w-full bg-slate-200 rounded-full h-4\">\n                  <div\n                    className=\"bg-blue-500 h-4 rounded-full transition-all duration-500\"\n                    style={{ width: `${stat.progress}%` }}\n                  ></div>\n                </div>\n              </div>\n            ))\n          ) : (\n            <p className=\"text-gray-500\">No progress yet. Upload some files!</p>\n          )}\n        </div>\n      </div>\n\n      {/* Quick Links */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\">\n        {cards.map((item) => (\n          <div\n            key={item.title}\n            onClick={() => navigate(item.path)}\n            className=\"bg-white shadow-md hover:shadow-xl transition rounded-2xl border border-slate-200 cursor-pointer p-6 text-center\"\n          >\n            <div className=\"text-3xl mb-3\">{item.icon}</div>\n            <h3 className=\"font-semibold text-slate-700\">{item.title}</h3>\n            <p className=\"text-gray-500 text-sm mt-2\">{item.desc}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAQ,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAEhD;AACA,KAAM,CAAAc,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAb,KAAK,CAACc,GAAG,CAAC,6BAA6B,CAAE,CACzDC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYV,KAAK,CAAG,CAC9C,CAAC,CAAC,CAEF;AACA,KAAM,CAAAW,OAAO,CAAGL,GAAG,CAACM,IAAI,CAACC,MAAM,CAAC,CAACC,GAAG,CAAEC,CAAC,GAAK,CAC1CD,GAAG,CAACC,CAAC,CAACC,OAAO,CAAC,CAAGF,GAAG,CAACC,CAAC,CAACC,OAAO,CAAC,CAAGF,GAAG,CAACC,CAAC,CAACC,OAAO,CAAC,CAAG,CAAC,CAAG,CAAC,CACxD,MAAO,CAAAF,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN;AACA,KAAM,CAAAG,KAAK,CAAGC,MAAM,CAACC,IAAI,CAACR,OAAO,CAAC,CAACS,GAAG,CAAEJ,OAAO,GAAM,CACnDA,OAAO,CACPK,QAAQ,CAAEC,IAAI,CAACC,GAAG,CAAEZ,OAAO,CAACK,OAAO,CAAC,CAAG,CAAC,CAAI,GAAG,CAAE,GAAG,CACtD,CAAC,CAAC,CAAC,CAEHZ,aAAa,CAACa,KAAK,CAAC,CACtB,CAAE,MAAOO,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC7C,CACF,CAAC,CAEDlC,SAAS,CAAC,IAAM,CACde,aAAa,CAAC,CAAC,CAEf;AACAsB,MAAM,CAACC,gBAAgB,CAAC,cAAc,CAAEvB,aAAa,CAAC,CACtD,MAAO,IAAMsB,MAAM,CAACE,mBAAmB,CAAC,cAAc,CAAExB,aAAa,CAAC,CACxE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAyB,KAAK,CAAG,CACZ,CAAEC,KAAK,CAAE,cAAc,CAAEC,IAAI,CAAE,wCAAwC,CAAEC,IAAI,CAAE,IAAI,CAAEC,IAAI,CAAE,mBAAoB,CAAC,CAChH,CAAEH,KAAK,CAAE,YAAY,CAAEC,IAAI,CAAE,gCAAgC,CAAEC,IAAI,CAAE,IAAI,CAAEC,IAAI,CAAE,kBAAmB,CAAC,CACrG,CAAEH,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,mCAAmC,CAAEC,IAAI,CAAE,IAAI,CAAEC,IAAI,CAAE,qBAAsB,CAAC,CAC1G,CAED,mBACErC,KAAA,QAAKsC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAE5BzC,IAAA,QAAKwC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAChDvC,KAAA,OAAIsC,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EAAC,aACzC,cAAAzC,IAAA,SAAMwC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,EAC1D,CAAC,CACF,CAAC,cAGNvC,KAAA,QAAKsC,SAAS,CAAC,4DAA4D,CAAAC,QAAA,eACzEzC,IAAA,OAAIwC,SAAS,CAAC,2CAA2C,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC7EzC,IAAA,QAAKwC,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBjC,UAAU,CAACkC,MAAM,CAAG,CAAC,CACpBlC,UAAU,CAACiB,GAAG,CAAEkB,IAAI,eAClBzC,KAAA,QAAAuC,QAAA,eACEvC,KAAA,QAAKsC,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCzC,IAAA,SAAMwC,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEE,IAAI,CAACtB,OAAO,CAAO,CAAC,cACjEnB,KAAA,SAAMsC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAEd,IAAI,CAACiB,KAAK,CAACD,IAAI,CAACjB,QAAQ,CAAC,CAAC,GAAC,EAAM,CAAC,EACxE,CAAC,cACN1B,IAAA,QAAKwC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACnDzC,IAAA,QACEwC,SAAS,CAAC,0DAA0D,CACpEK,KAAK,CAAE,CAAEC,KAAK,IAAA/B,MAAA,CAAK4B,IAAI,CAACjB,QAAQ,KAAI,CAAE,CAClC,CAAC,CACJ,CAAC,GAVEiB,IAAI,CAACtB,OAWV,CACN,CAAC,cAEFrB,IAAA,MAAGwC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,qCAAmC,CAAG,CACpE,CACE,CAAC,EACH,CAAC,cAGNzC,IAAA,QAAKwC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CACxDN,KAAK,CAACV,GAAG,CAAEsB,IAAI,eACd7C,KAAA,QAEE8C,OAAO,CAAEA,CAAA,GAAM5C,QAAQ,CAAC2C,IAAI,CAACR,IAAI,CAAE,CACnCC,SAAS,CAAC,kHAAkH,CAAAC,QAAA,eAE5HzC,IAAA,QAAKwC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEM,IAAI,CAACT,IAAI,CAAM,CAAC,cAChDtC,IAAA,OAAIwC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAEM,IAAI,CAACX,KAAK,CAAK,CAAC,cAC9DpC,IAAA,MAAGwC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAEM,IAAI,CAACV,IAAI,CAAI,CAAC,GANpDU,IAAI,CAACX,KAOP,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAjC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}