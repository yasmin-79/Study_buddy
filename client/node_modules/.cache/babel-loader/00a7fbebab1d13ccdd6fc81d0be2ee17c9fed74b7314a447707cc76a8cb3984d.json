{"ast":null,"code":"import express from 'express';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\nconst router = express.Router();\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nrouter.get('/download/:filename', (req, res) => {\n  const filename = req.params.filename;\n  const filePath = path.join(__dirname, '../uploads', filename);\n  res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\n  res.setHeader('Content-Type', 'application/pdf');\n  res.download(filePath, filename, err => {\n    if (err) {\n      console.error(\"Download error:\", err);\n      res.status(500).send(\"Error downloading file\");\n    }\n  });\n});\nexport default router;","map":{"version":3,"names":["express","path","fileURLToPath","router","Router","__filename","import","meta","url","__dirname","dirname","get","req","res","filename","params","filePath","join","setHeader","download","err","console","error","status","send"],"sources":["C:/Users/yasmi/Downloads/studybuddy/client/src/pages/files.js"],"sourcesContent":["import express from 'express';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst router = express.Router();\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nrouter.get('/download/:filename', (req, res) => {\r\n  const filename = req.params.filename;\r\n  const filePath = path.join(__dirname, '../uploads', filename);\r\n\r\n  res.setHeader('Content-Disposition', `attachment; filename=\"${filename}\"`);\r\n  res.setHeader('Content-Type', 'application/pdf');\r\n\r\n  res.download(filePath, filename, (err) => {\r\n    if (err) {\r\n      console.error(\"Download error:\", err);\r\n      res.status(500).send(\"Error downloading file\");\r\n    }\r\n  });\r\n});\r\n\r\nexport default router;\r\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,OAAOC,IAAI,MAAM,MAAM;AACvB,SAASC,aAAa,QAAQ,KAAK;AAEnC,MAAMC,MAAM,GAAGH,OAAO,CAACI,MAAM,CAAC,CAAC;AAE/B,MAAMC,UAAU,GAAGH,aAAa,CAACI,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC;AACjD,MAAMC,SAAS,GAAGR,IAAI,CAACS,OAAO,CAACL,UAAU,CAAC;AAE1CF,MAAM,CAACQ,GAAG,CAAC,qBAAqB,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC9C,MAAMC,QAAQ,GAAGF,GAAG,CAACG,MAAM,CAACD,QAAQ;EACpC,MAAME,QAAQ,GAAGf,IAAI,CAACgB,IAAI,CAACR,SAAS,EAAE,YAAY,EAAEK,QAAQ,CAAC;EAE7DD,GAAG,CAACK,SAAS,CAAC,qBAAqB,EAAE,yBAAyBJ,QAAQ,GAAG,CAAC;EAC1ED,GAAG,CAACK,SAAS,CAAC,cAAc,EAAE,iBAAiB,CAAC;EAEhDL,GAAG,CAACM,QAAQ,CAACH,QAAQ,EAAEF,QAAQ,EAAGM,GAAG,IAAK;IACxC,IAAIA,GAAG,EAAE;MACPC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEF,GAAG,CAAC;MACrCP,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;IAChD;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF,eAAerB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}