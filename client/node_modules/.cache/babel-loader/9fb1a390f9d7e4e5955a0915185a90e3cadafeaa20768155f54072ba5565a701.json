{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import BACKEND_URL from\"../config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Subjects(){const[files,setFiles]=useState([]);const token=localStorage.getItem(\"token\");useEffect(()=>{axios.get(\"\".concat(BACKEND_URL,\"/files\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setFiles(res.data)).catch(err=>console.error(\"Error fetching files:\",err));},[token]);// Group files by subject\nconst grouped=files.reduce((acc,f)=>{acc[f.subject]=acc[f.subject]?[...acc[f.subject],f]:[f];return acc;},{});return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Subjects\"}),Object.keys(grouped).length>0?Object.keys(grouped).map(subj=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-purple-600\",children:subj}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-4 mt-2\",children:grouped[subj].map(f=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border rounded shadow-sm\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:f.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 mt-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(BACKEND_URL,\"/uploads/\").concat(f.filename),target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-500\",children:\"View\"}),/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(BACKEND_URL,\"/files/download/\").concat(f.filename),className:\"text-green-500\",children:\"Download\"})]})]},f.id))})]},subj)):/*#__PURE__*/_jsx(\"p\",{children:\"No files grouped yet.\"})]});}export default Subjects;","map":{"version":3,"names":["React","useEffect","useState","axios","BACKEND_URL","jsx","_jsx","jsxs","_jsxs","Subjects","files","setFiles","token","localStorage","getItem","get","concat","headers","Authorization","then","res","data","catch","err","console","error","grouped","reduce","acc","f","subject","className","children","Object","keys","length","map","subj","title","href","filename","target","rel","id"],"sources":["C:/Users/yasmi/Downloads/studybuddy/client/src/pages/subjects.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport BACKEND_URL from \"../config\";\r\n\r\nfunction Subjects() {\r\n  const [files, setFiles] = useState([]);\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${BACKEND_URL}/files`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n      .then((res) => setFiles(res.data))\r\n      .catch((err) => console.error(\"Error fetching files:\", err));\r\n  }, [token]);\r\n\r\n  // Group files by subject\r\n  const grouped = files.reduce((acc, f) => {\r\n    acc[f.subject] = acc[f.subject] ? [...acc[f.subject], f] : [f];\r\n    return acc;\r\n  }, {});\r\n\r\n  return (\r\n    <div className=\"bg-white shadow rounded p-6\">\r\n      <h2 className=\"text-lg font-semibold mb-4\">Subjects</h2>\r\n      {Object.keys(grouped).length > 0 ? (\r\n        Object.keys(grouped).map((subj) => (\r\n          <div key={subj} className=\"mb-6\">\r\n            <h3 className=\"font-semibold text-purple-600\">{subj}</h3>\r\n            <div className=\"grid grid-cols-3 gap-4 mt-2\">\r\n              {grouped[subj].map((f) => (\r\n                <div key={f.id} className=\"p-3 border rounded shadow-sm\">\r\n                  <p className=\"font-medium\">{f.title}</p>\r\n                  <div className=\"flex space-x-4 mt-2\">\r\n                    <a\r\n                      href={`${BACKEND_URL}/uploads/${f.filename}`}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"text-blue-500\"\r\n                    >\r\n                      View\r\n                    </a>\r\n                    <a\r\n                      href={`${BACKEND_URL}/files/download/${f.filename}`}\r\n                      className=\"text-green-500\"\r\n                    >\r\n                      Download\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <p>No files grouped yet.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Subjects;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,WAAW,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAU,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3Cb,SAAS,CAAC,IAAM,CACdE,KAAK,CACFY,GAAG,IAAAC,MAAA,CAAIZ,WAAW,WAAU,CAC3Ba,OAAO,CAAE,CAAEC,aAAa,WAAAF,MAAA,CAAYJ,KAAK,CAAG,CAC9C,CAAC,CAAC,CACDO,IAAI,CAAEC,GAAG,EAAKT,QAAQ,CAACS,GAAG,CAACC,IAAI,CAAC,CAAC,CACjCC,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAAC,CAChE,CAAC,CAAE,CAACX,KAAK,CAAC,CAAC,CAEX;AACA,KAAM,CAAAc,OAAO,CAAGhB,KAAK,CAACiB,MAAM,CAAC,CAACC,GAAG,CAAEC,CAAC,GAAK,CACvCD,GAAG,CAACC,CAAC,CAACC,OAAO,CAAC,CAAGF,GAAG,CAACC,CAAC,CAACC,OAAO,CAAC,CAAG,CAAC,GAAGF,GAAG,CAACC,CAAC,CAACC,OAAO,CAAC,CAAED,CAAC,CAAC,CAAG,CAACA,CAAC,CAAC,CAC9D,MAAO,CAAAD,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN,mBACEpB,KAAA,QAAKuB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1B,IAAA,OAAIyB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,CACvDC,MAAM,CAACC,IAAI,CAACR,OAAO,CAAC,CAACS,MAAM,CAAG,CAAC,CAC9BF,MAAM,CAACC,IAAI,CAACR,OAAO,CAAC,CAACU,GAAG,CAAEC,IAAI,eAC5B7B,KAAA,QAAgBuB,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC9B1B,IAAA,OAAIyB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAEK,IAAI,CAAK,CAAC,cACzD/B,IAAA,QAAKyB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CACzCN,OAAO,CAACW,IAAI,CAAC,CAACD,GAAG,CAAEP,CAAC,eACnBrB,KAAA,QAAgBuB,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eACtD1B,IAAA,MAAGyB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEH,CAAC,CAACS,KAAK,CAAI,CAAC,cACxC9B,KAAA,QAAKuB,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClC1B,IAAA,MACEiC,IAAI,IAAAvB,MAAA,CAAKZ,WAAW,cAAAY,MAAA,CAAYa,CAAC,CAACW,QAAQ,CAAG,CAC7CC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBX,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC1B,MAED,CAAG,CAAC,cACJ1B,IAAA,MACEiC,IAAI,IAAAvB,MAAA,CAAKZ,WAAW,qBAAAY,MAAA,CAAmBa,CAAC,CAACW,QAAQ,CAAG,CACpDT,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC3B,UAED,CAAG,CAAC,EACD,CAAC,GAjBEH,CAAC,CAACc,EAkBP,CACN,CAAC,CACC,CAAC,GAxBEN,IAyBL,CACN,CAAC,cAEF/B,IAAA,MAAA0B,QAAA,CAAG,uBAAqB,CAAG,CAC5B,EACE,CAAC,CAEV,CAEA,cAAe,CAAAvB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}